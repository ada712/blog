(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{427:function(s,t,a){s.exports=a.p+"assets/img/WX20240818-182059@2x.44304d2e.png"},506:function(s,t,a){"use strict";a.r(t);var e=a(2),v=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"脚手架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架"}},[s._v("#")]),s._v(" 脚手架")]),s._v(" "),t("h3",{attrs:{id:"创建项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[s._v("#")]),s._v(" 创建项目")]),s._v(" "),t("ul",[t("li",[s._v("标准模板创建")]),s._v(" "),t("li",[s._v("自定义规则创建")]),s._v(" "),t("li",[s._v("创建组件库")]),s._v(" "),t("li",[s._v("自动安装和启动")])]),s._v(" "),t("h3",{attrs:{id:"发布项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布项目"}},[s._v("#")]),s._v(" 发布项目")]),s._v(" "),t("ul",[t("li",[s._v("git自动化")]),s._v(" "),t("li",[s._v("云构建")]),s._v(" "),t("li",[s._v("项目自动发布")]),s._v(" "),t("li",[s._v("组件自动发布")])]),s._v(" "),t("blockquote",[t("p",[s._v("开发脚手架的核心目标："),t("strong",[s._v("提高前端研发效能")])])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("创建项目+通用代码")]),s._v(" "),t("th",[s._v("git操作")]),s._v(" "),t("th",[s._v("构建+发布上线")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("埋点")]),s._v(" "),t("td",[s._v("创建仓库")]),s._v(" "),t("td",[s._v("依赖安装和构建")])]),s._v(" "),t("tr",[t("td",[s._v("HTTP请求")]),s._v(" "),t("td",[s._v("代码冲突")]),s._v(" "),t("td",[s._v("资源上传CDN")])]),s._v(" "),t("tr",[t("td",[s._v("工具方法")]),s._v(" "),t("td",[s._v("远程代码同步")]),s._v(" "),t("td",[s._v("域名绑定")])]),s._v(" "),t("tr",[t("td",[s._v("组件库")]),s._v(" "),t("td",[s._v("创建版本")]),s._v(" "),t("td",[s._v("测试/正式服务器")])]),s._v(" "),t("tr",[t("td",[s._v("--")]),s._v(" "),t("td",[s._v("发布打tag")]),s._v(" "),t("td",[s._v("--")])])])]),s._v(" "),t("h2",{attrs:{id:"脚手架核心价值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架核心价值"}},[s._v("#")]),s._v(" 脚手架核心价值")]),s._v(" "),t("p",[s._v("将研发过程")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("自动化")]),s._v("：项目重复代码拷贝、git操作、发布上线操作")]),s._v(" "),t("li",[t("strong",[s._v("标准化")]),s._v("：项目创建、git flow、发布流程、回滚流程")]),s._v(" "),t("li",[t("strong",[s._v("数据化")]),s._v("：研发过程系统化、数据化、使得研发过程可量化")])]),s._v(" "),t("h2",{attrs:{id:"和自动化构建工具区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#和自动化构建工具区别"}},[s._v("#")]),s._v(" 和自动化构建工具区别")]),s._v(" "),t("p",[s._v("问题：jenkins / travis 等已经比较成熟，为什么还需要自研")]),s._v(" "),t("ul",[t("li",[s._v("不满足需求：jenkins / travis 通常在git hooks中触发，需要在服务端执行，无法覆盖研发人员本地的功能，如：创建项目自动化/本地git 操作自动化")]),s._v(" "),t("li",[s._v("定制复杂： jenkins / travis 定制过程需要开发插件，其过程较为复杂，需要使用java语言，对前端同学不够友好")])]),s._v(" "),t("h2",{attrs:{id:"从使用角度理解什么是脚手架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从使用角度理解什么是脚手架"}},[s._v("#")]),s._v(" 从使用角度理解什么是脚手架？")]),s._v(" "),t("h3",{attrs:{id:"脚手架简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架简介"}},[s._v("#")]),s._v(" 脚手架简介")]),s._v(" "),t("blockquote",[t("p",[s._v("脚手架本质是操作系统的客户端，通过命令行执行")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue create my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("project\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("此命令由3部分组成")]),s._v(" "),t("ul",[t("li",[s._v("主命令: "),t("strong",[s._v("vue")])]),s._v(" "),t("li",[s._v("command: "),t("strong",[s._v("create")])]),s._v(" "),t("li",[s._v("command的param: "),t("strong",[s._v("my-project")])])]),s._v(" "),t("p",[s._v("如已存在该文件，可强制覆盖")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue create my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("project  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("force\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里的--force 叫做 option，用了辅助脚手架确认在特点场景下用户的选择（可理解为"),t("strong",[s._v("配置")]),s._v("）\n还有一种场景：通过vue create 创建项目时，会自动执行npm install 帮用户执行依赖，eg:希望通过淘宝镜像来安装：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue create my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("project  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("force "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r https"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("taobao"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里的-r 叫做 option，使用的是简写，实际是 --registry ,更多命令\n我们可以通过"),t("strong",[s._v("help")]),s._v(" 查看帮助信息：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue create "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("help\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"脚手架的执行原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚手架的执行原理"}},[s._v("#")]),s._v(" 脚手架的执行原理")]),s._v(" "),t("p",[s._v("输入命令")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue create my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("project\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:a(427),alt:"image.png"}}),s._v("\n执行命令which vue 找到vue的安装位置")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Users"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ada"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("nvm"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("versions"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v14"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17.3")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vue\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里是"),t("strong",[s._v("软链接")]),s._v(" 实际"),t("strong",[s._v("硬链接")]),s._v("是")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("lib"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("node_modules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vue"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("cli"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("脚手架的执行原理如下：")]),s._v(" "),t("ul",[t("li",[s._v("在终端输入 vue create my-project")]),s._v(" "),t("li",[s._v("终端解析出vue 命令")]),s._v(" "),t("li",[s._v("终端在环境变量中找到 vue 命令"),t("strong",[s._v("软链接")])]),s._v(" "),t("li",[s._v("终端根据vue 命令链接到实际文件vue.js"),t("strong",[s._v("硬链接")])]),s._v(" "),t("li",[s._v("终端利用"),t("strong",[s._v("node")]),s._v("执行文件"),t("strong",[s._v("vue.js")])]),s._v(" "),t("li",[s._v("vue.js解析command /options")]),s._v(" "),t("li",[s._v("vue.js执行command /options对应的方法")]),s._v(" "),t("li",[s._v("执行完毕，退出执行")])]),s._v(" "),t("h2",{attrs:{id:"从应用的角度看如何开发一个脚手架"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从应用的角度看如何开发一个脚手架"}},[s._v("#")]),s._v(" 从应用的角度看如何开发一个脚手架")]),s._v(" "),t("blockquote",[t("p",[s._v("这里以"),t("strong",[s._v("vue-cli")]),s._v("为例")])]),s._v(" "),t("ul",[t("li",[s._v("开发"),t("strong",[s._v("npm")]),s._v("项目，该项目中应该包含一个bin/vue.js文件，并将这个项目发布到npm")]),s._v(" "),t("li",[s._v("将npm 项目安装到"),t("strong",[s._v("node")]),s._v("的"),t("strong",[s._v("lib/node_modules")])]),s._v(" "),t("li",[s._v("在node的bin目录下配置vue软链接指向"),t("strong",[s._v("lib/node_modules/@vue/cli/bin/vue.js")])])]),s._v(" "),t("p",[s._v("这样我们在执行"),t("strong",[s._v("vue")]),s._v("命令的时候就可以找到"),t("strong",[s._v("vue.js")]),s._v("进行执行")]),s._v(" "),t("blockquote",[t("p",[s._v("保留思考")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("为什么全局安装@vue/cli 命令后，添加的命令为vue")])]),s._v(" "),t("li",[t("p",[s._v("全局安装@vue/cli 时，发生了什么")])]),s._v(" "),t("li",[t("p",[s._v("为什么vue指向一个js 文件，我们却能直接通过vue 命令执行它")])]),s._v(" "),t("li",[t("p",[s._v("1.bin 下的是可执行文件 vue 是个软链接，实际指向文件 vue.js。在package.json中添加bin字段")])])]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"bin"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"vue"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bin/vue.js"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[t("ol",{attrs:{start:"2"}},[t("li",[s._v("下载依赖到node_modules,再根据package.json中的bin字段，创建软链接->node_modules/@vue/cli/bin/vue.js")])])]),s._v(" "),t("li",[t("ol",{attrs:{start:"3"}},[t("li",[s._v("去环境变量中找这个vue , 找到软链接，再找到实际文件，node环境中去执行文件")])])])])])}),[],!1,null,null,null);t.default=v.exports}}]);