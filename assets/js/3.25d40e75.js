(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{433:function(s,t,e){s.exports=e.p+"assets/img/w-p1.977cae16.png"},434:function(s,t,e){s.exports=e.p+"assets/img/w-p2.1c5252bc.png"},435:function(s,t,e){s.exports=e.p+"assets/img/w-p3.6235f54c.png"},436:function(s,t,e){s.exports=e.p+"assets/img/w-p4.3061b59c.png"},437:function(s,t,e){s.exports=e.p+"assets/img/w-p5.7da47246.png"},438:function(s,t,e){s.exports=e.p+"assets/img/w-p6.4f78fe7a.png"},439:function(s,t,e){s.exports=e.p+"assets/img/w-p7.b9fbf6a4.png"},440:function(s,t,e){s.exports=e.p+"assets/img/w-p8.0c227d81.gif"},441:function(s,t,e){s.exports=e.p+"assets/img/w-p9.42ea05bc.png"},442:function(s,t,e){s.exports=e.p+"assets/img/w-10.e7381fa9.gif"},443:function(s,t,e){s.exports=e.p+"assets/img/w-11.3d31b609.png"},444:function(s,t,e){s.exports=e.p+"assets/img/w-12.a673a088.gif"},445:function(s,t,e){s.exports=e.p+"assets/img/w-13.b1d28fb0.png"},446:function(s,t,e){s.exports=e.p+"assets/img/w-14.b0d9a9c6.png"},447:function(s,t,e){s.exports=e.p+"assets/img/w-15.f8c86f26.gif"},448:function(s,t,e){s.exports=e.p+"assets/img/w-16.2cb50091.png"},449:function(s,t,e){s.exports=e.p+"assets/img/w-17.41039427.png"},450:function(s,t,e){s.exports=e.p+"assets/img/w-18.b09d1e65.png"},451:function(s,t,e){s.exports=e.p+"assets/img/w-19.af6a1f43.png"},452:function(s,t,e){s.exports=e.p+"assets/img/w-20.fc250843.png"},453:function(s,t,e){s.exports=e.p+"assets/img/w-21.4f3a9e7d.png"},454:function(s,t,e){s.exports=e.p+"assets/img/w-22.2cf9b382.png"},455:function(s,t,e){s.exports=e.p+"assets/img/w-23.1759f5fc.gif"},456:function(s,t,e){s.exports=e.p+"assets/img/w-24.67c064ac.gif"},457:function(s,t,e){s.exports=e.p+"assets/img/w-25.2394da1d.png"},458:function(s,t,e){s.exports=e.p+"assets/img/w-26.c3b90d28.png"},459:function(s,t,e){s.exports=e.p+"assets/img/w-27.60159677.gif"},460:function(s,t,e){s.exports=e.p+"assets/img/w-28.d0fa87d9.png"},512:function(s,t,e){"use strict";e.r(t);var a=e(2),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"whistle-是什么"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#whistle-是什么"}},[s._v("#")]),s._v(" whistle 是什么")]),s._v(" "),t("p",[s._v("引用 "),t("a",{attrs:{href:"https://wproxy.org/whistle/",title:"https://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方的定义"),t("OutboundLink")],1)]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("whistle")]),s._v("，拼音[wēisǒu])基于 "),t("code",[s._v("Node")]),s._v(" 实现的跨平台 "),t("code",[s._v("web")]),s._v(" 调试代理工具，类似的工具有 "),t("code",[s._v("Windows")]),s._v(" 平台上的 "),t("code",[s._v("Fiddler")]),s._v("，主要用于查看、修改 "),t("code",[s._v("HTTP")]),s._v("、"),t("code",[s._v("HTTPS")]),s._v("、"),t("code",[s._v("Websocket")]),s._v(" 的请求、响应，也可以作为 "),t("code",[s._v("HTTP")]),s._v(" 代理服务器使用，不同于 "),t("code",[s._v("Fiddler")]),s._v(" 通过断点修改请求响应的方式，"),t("code",[s._v("whistle")]),s._v(" 采用的是类似配置系统 "),t("code",[s._v("hosts")]),s._v(" 的方式，一切操作都可以通过配置实现，支持域名、路径、正则表达式、通配符、通配路径等多种匹配方式，且可以通过 "),t("code",[s._v("Node")]),s._v(" 模块扩展功能")])]),s._v(" "),t("p",[s._v("总的来说，"),t("code",[s._v("whistle")]),s._v(" 有如下几个特性")]),s._v(" "),t("ul",[t("li",[s._v("基于 "),t("code",[s._v("Node")]),s._v(" 实现，跨平台 "),t("code",[s._v("web")]),s._v(" 调试代理工具，"),t("code",[s._v("window")]),s._v("，"),t("code",[s._v("Linux")]),s._v("，"),t("code",[s._v("Mac")]),s._v(" 都可以使用")]),s._v(" "),t("li",[s._v("用于查看、修改 "),t("code",[s._v("HTTP")]),s._v("、"),t("code",[s._v("HTTPS")]),s._v("、"),t("code",[s._v("Websocket")]),s._v(" 的请求、响应，也可以作为 "),t("code",[s._v("HTTP")]),s._v(" 代理服务器使用")]),s._v(" "),t("li",[t("code",[s._v("whistle")]),s._v(" 采用的是类似配置系统 "),t("code",[s._v("hosts")]),s._v(" 的方式，一切操作都可以通过配置实现")]),s._v(" "),t("li",[s._v("可以通过 "),t("code",[s._v("Node")]),s._v(" 模块扩展功能")])]),s._v(" "),t("h2",{attrs:{id:"为什么选择-whistle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择-whistle"}},[s._v("#")]),s._v(" 为什么选择 whistle")]),s._v(" "),t("p",[s._v("第一，"),t("code",[s._v("whistle")]),s._v(" 是一个 "),t("code",[s._v("web")]),s._v(" 调试代理工具，它的功能十分强大。作为一名前端，我们需要经常跟协议中的应用层打交道，"),t("code",[s._v("Mock")]),s._v(" 数据、跨域问题、"),t("code",[s._v("cookie")]),s._v(" 的修改、移动端调试等等，都是我们必备的技能，而 "),t("code",[s._v("whistle")]),s._v(" 就能解决其中 "),t("code",[s._v("90%")]),s._v(" 的问题")]),s._v(" "),t("p",[s._v("个人经常使用的一些场景如下：")]),s._v(" "),t("ul",[t("li",[s._v("绑定 "),t("code",[s._v("Host")])]),s._v(" "),t("li",[s._v("替换请求（"),t("code",[s._v("Mock")]),s._v(" 数据）")]),s._v(" "),t("li",[s._v("使用 "),t("code",[s._v("Weinre")]),s._v(" 或者 "),t("code",[s._v("vConsole")]),s._v(" 调试移动端页面")]),s._v(" "),t("li",[s._v("修改 "),t("code",[s._v("cookie")])]),s._v(" "),t("li",[s._v("往 "),t("code",[s._v("HTML")]),s._v(" 中插入样式")]),s._v(" "),t("li",[s._v("往 "),t("code",[s._v("HTML")]),s._v(" 中插入脚本 ...")])]),s._v(" "),t("p",[s._v("以下为官方的一张图，大家可以感受一下")]),s._v(" "),t("p",[t("img",{attrs:{src:e(433),alt:"xx"}})]),s._v(" "),t("p",[s._v("第二，除了功能十分强大，使用也十分便捷，只需要简单的命令就能打开网页进行抓包等操作")]),s._v(" "),t("p",[s._v("第三，不像 "),t("code",[s._v("window")]),s._v(" 中的 "),t("code",[s._v("Fidder")]),s._v(" 需要消耗大量 "),t("code",[s._v("CPU")]),s._v("，也不像 "),t("code",[s._v("Mac")]),s._v(" 中 "),t("code",[s._v("Charles")]),s._v(" 不是免费的，它是免费的，开源的，而且一个跨平台 "),t("code",[s._v("web")]),s._v(" 调试代理工具")]),s._v(" "),t("p",[s._v("第四，基于 "),t("code",[s._v("Node")]),s._v(" 模块实现。可以通过 "),t("code",[s._v("Node")]),s._v(" 模块进行扩展")]),s._v(" "),t("p",[s._v("以上，还没说服你的话，希望接下来的实战能够让你感受它的强大")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("安装 "),t("code",[s._v("Node")]),s._v("，推荐安装最新版的 "),t("code",[s._v("Node")]),s._v(",虽然 "),t("code",[s._v("whistle")]),s._v(" 支持 "),t("code",[s._v("v0.10.0")]),s._v(" 以上版本的 "),t("code",[s._v("Node")]),s._v("。这一个我相信大家作为一名前端都应该有的环境。这里多插一句，推荐使用 "),t("code",[s._v("n")]),s._v(" 管理 "),t("code",[s._v("node")]),s._v(" 版本")])]),s._v(" "),t("li",[t("p",[s._v("用以下命令安装 "),t("code",[s._v("whistle")]),s._v("，如果很慢，请切换源进行安装。再插一句，推荐使用 "),t("code",[s._v("nrm")]),s._v(" 管理你的 "),t("code",[s._v("npm")]),s._v(" 源")])])]),s._v(" "),t("div",{staticClass:"language-arduino line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-arduino"}},[t("code",[s._v("npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g whistle\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Mac")]),s._v("\nsudo npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g whistle\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ul",[t("li",[s._v("启动 "),t("code",[s._v("whistle")]),s._v("。通过命令 "),t("code",[s._v("w2 start")]),s._v(" 即可启动。启动之后，我们看到以下提示，就表示安装成功了")])]),s._v(" "),t("p",[t("img",{attrs:{src:e(434),alt:"xx"}})]),s._v(" "),t("p",[s._v("这里还需要留意其他几个经常使用的命令")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("w2 help // 查看帮助，里面很多常用的命令\nw2 restart // 重启 whistle\nw2 stop // 停止 whistle\nw2 run // 调试模式启动whistle(主要用于查看whistle的异常及插件开发)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("配置代理，分为全局代理、浏览器代理和移动端代理。这里主要谈谈 "),t("code",[s._v("mac")]),s._v(" 端全局代理，"),t("code",[s._v("chrome")]),s._v(" 浏览器代理以及 "),t("code",[s._v("IOS")]),s._v(" 侧的移动端代理。其他详情可以查看官方文档 "),t("a",{attrs:{href:"http://wproxy.org/whistle/install.html",title:"http://wproxy.org/whistle/install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装启动"),t("OutboundLink")],1),s._v("。需要注意的是，代理服务器："),t("code",[s._v("127.0.0.1")]),s._v(" 端口号："),t("code",[s._v("8899")]),s._v("。如果端口被占用，可以通过 "),t("code",[s._v("-p")]),s._v(" 来指定新的端口")]),s._v(" "),t("p",[s._v("1.全局代理（"),t("code",[s._v("mac")]),s._v("）："),t("code",[s._v("System Preferences")]),s._v(" > "),t("code",[s._v("Network")]),s._v(" > "),t("code",[s._v("Advanced")]),s._v(" >"),t("code",[s._v("Proxies")]),s._v(" > "),t("code",[s._v("HTTP or HTTPS")])])])]),s._v(" "),t("p",[t("img",{attrs:{src:e(435),alt:"xx"}})]),s._v(" "),t("p",[t("img",{attrs:{src:e(436),alt:"xx"}})]),s._v(" "),t("p",[s._v("2.浏览器代理。首先先下载 "),t("code",[s._v("Chrome")]),s._v(" 代理插件：推荐安装 "),t("a",{attrs:{href:"https://chrome.google.com/webstore/detail/padekgcemlokbadohgkifijomclgjgif",title:"https://chrome.google.com/webstore/detail/padekgcemlokbadohgkifijomclgjgif",target:"_blank",rel:"noopener noreferrer"}},[s._v("SwitchyOmega"),t("OutboundLink")],1),s._v(" 。考虑到一些朋友无法很好的下载安装，可以去 "),t("a",{attrs:{href:"https://github.com/FelisCatus/SwitchyOmega/releases",title:"https://github.com/FelisCatus/SwitchyOmega/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),t("OutboundLink")],1),s._v(" 下载。然后配置如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(437),alt:"xx"}})]),s._v(" "),t("p",[s._v("3.移动端代理。注意，要和当前电脑的 "),t("code",[s._v("WIFI")]),s._v(" 是同一个 "),t("code",[s._v("WIFI")]),s._v("。以 "),t("code",[s._v("IOS")]),s._v(" 为例（安卓同理）")]),s._v(" "),t("p",[t("img",{attrs:{src:e(438),alt:"xx"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("访问配置页面，一切顺利的话，访问 "),t("a",{attrs:{href:"http://127.0.0.1:8899/",title:"http://127.0.0.1:8899/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://127.0.0.1:8899"),t("OutboundLink")],1),s._v(" 就可以看到相关的页面")])]),s._v(" "),t("li",[t("p",[s._v("还有一个很重要的步骤：安装根证书，假如不安装根证书的话，就不能抓 "),t("code",[s._v("HTTPS")]),s._v(" 的包，详情请看 "),t("a",{attrs:{href:"http://wproxy.org/whistle/webui/https.html",title:"http://wproxy.org/whistle/webui/https.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装详情步骤"),t("OutboundLink")],1)])])]),s._v(" "),t("p",[s._v("以上就是我们的准备工作了，可能还是一些同学还是会遇到一些问题，可以去官方 "),t("a",{attrs:{href:"https://github.com/avwo/whistle/issues",title:"https://github.com/avwo/whistle/issues",target:"_blank",rel:"noopener noreferrer"}},[s._v("issue"),t("OutboundLink")],1),s._v(" 看看有没有相关的解决方法，也可以留言评论，我们一起看看")]),s._v(" "),t("h2",{attrs:{id:"界面讲解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#界面讲解"}},[s._v("#")]),s._v(" 界面讲解")]),s._v(" "),t("p",[s._v("对于新手来说，我们先熟悉下 "),t("code",[s._v("whistle")]),s._v(" 的界面，有个大概的印象")]),s._v(" "),t("p",[s._v("以下是 "),t("code",[s._v("whistle")]),s._v(" 的界面，常见的几个选项：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("Network")]),s._v("——请求列表页面")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Rules")]),s._v("——操作规则配置页面")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Values")]),s._v("——存放 "),t("code",[s._v("KeyValue")]),s._v(" 的系统")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Plugins")]),s._v("——插件列表页面")])])]),s._v(" "),t("p",[t("img",{attrs:{src:e(439),alt:"xx"}})]),s._v(" "),t("h2",{attrs:{id:"快速上手-基础使用【mock-数据以及解决跨域】"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速上手-基础使用【mock-数据以及解决跨域】"}},[s._v("#")]),s._v(" 快速上手——基础使用【mock 数据以及解决跨域】")]),s._v(" "),t("p",[t("code",[s._v("whistle")]),s._v(" 使用的是类似代理的方式，"),t("code",[s._v("Rules")]),s._v(" 版面下默认有一个 "),t("code",[s._v("default")]),s._v(" 的分组，我们可以创建、重命名、删除一个分组，可以根据以下示例快速建立一个分组，如动图所示：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(440),alt:"xx"}})]),s._v(" "),t("p",[s._v("接下来，我们就可以在右侧建立一些规则了。我们来拿掘金做个演示吧，掘金推荐首页获取列表数据的接口为 "),t("code",[s._v("https://apinew.juejin.im/recommend_api/v1/article/recommend_all_feed")]),s._v("，以下是目前的页面，注意，该接口的响应头设置了 "),t("strong",[t("code",[s._v("access-control-allow-origin: https://juejin.cn")])])]),s._v(" "),t("ul",[t("li",[s._v("意味着只能被 "),t("code",[s._v("juejin.cn")]),s._v(" 访问，其他域名无法访问，所以 "),t("code",[s._v("whistle")]),s._v(" 也会"),t("strong",[s._v("拦截")]),s._v("，我们通过 "),t("strong",[t("code",[s._v("resCors://")])]),s._v(" 来设置响应头，让 "),t("code",[s._v("juejin.cn")]),s._v(" 可以访问\n"),t("img",{attrs:{src:e(441),alt:"xx"}})])]),s._v(" "),t("p",[s._v("我们根据这个接口设置一条规则，以下规则表示完全匹配该接口，返回指定的 "),t("code",[s._v("juejinList.json")]),s._v(" 数据，相当于 Mock 这个接口的返回")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# 完全匹配，相当于 Mock 这个接口的返回\nhttps://apinew.juejin.im/recommend_api/v1/article/recommend_all_feed file://{juejinList.json}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("img",{attrs:{src:e(442),alt:"xx"}})]),s._v(" "),t("p",[s._v("查看效果，报错了，看看报错，跨域问题，线上的之所以没有报错，原因在于，线上的接口的响应头设置了 "),t("code",[s._v("access-control-allow-origin: https://juejin.cn")]),s._v("，所以我们还应该 "),t("code",[s._v("Access-Control-Allow-Origin")]),s._v(" 请求头")]),s._v(" "),t("p",[t("img",{attrs:{src:e(443),alt:"xx"}})]),s._v(" "),t("p",[s._v("怎么办，就没有方法了么？当然不是，这个时候只需要多配置另外一条规则，总的规则如下：")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("https://apinew.juejin.im/recommend_api/v1/article/recommend_all_feed file://{juejinList.json}\nhttps://apinew.juejin.im/recommend_api/v1/article/recommend_all_feed resCors://{cors.json}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("其中 "),t("code",[s._v("cors.json")]),s._v(" 内容为")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("origin: https://juejin.cn\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("又或者可以-在文件的头部添加匹配所有请求的规则")]),s._v(" "),t("div",{staticClass:"language-doc line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* resCors://*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("查看效果，可以看到访问掘金推荐首页，返回了我们代理的数据了")]),s._v(" "),t("p",[t("img",{attrs:{src:e(444),alt:"xx"}})]),s._v(" "),t("p",[s._v("我们来看下 "),t("code",[s._v("Network")]),s._v(" 版面，选中我们代理了的接口，可以看到已经走了我们所配置的规则了")]),s._v(" "),t("p",[t("img",{attrs:{src:e(445),alt:"xx"}})]),s._v(" "),t("p",[s._v("上面我们是通过精确匹配匹配到了掘金的获取列表接口，写起来会很长，其实我们可以通过域名、路径、正则、精确匹配、通配符匹配等方式去匹配的，比如如下的规则也是可以的")]),s._v(" "),t("div",{staticClass:"language-text/plain line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("/v1/article/recommend_all_feed/i file://{juejinList.json}\n/v1/article/recommend_all_feed/i resCors://{cors.json}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("基础的使用就是这么简单，这里我们就解决了 "),t("code",[s._v("Mock")]),s._v(" 数据以及跨域的问题。当然，这只是 "),t("code",[s._v("whistle")]),s._v(" 其中一个小功能，接下来才是重头戏")]),s._v(" "),t("h2",{attrs:{id:"常用技能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用技能"}},[s._v("#")]),s._v(" 常用技能")]),s._v(" "),t("h3",{attrs:{id:"解决跨域问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解决跨域问题"}},[s._v("#")]),s._v(" 解决跨域问题")]),s._v(" "),t("p",[s._v("可以通过 "),t("code",[s._v("reqCors")]),s._v(" 修改请求的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",title:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",target:"_blank",rel:"noopener noreferrer"}},[s._v("CORS"),t("OutboundLink")],1),s._v("。也可以通过 "),t("code",[s._v("resCors")]),s._v(" 修改返回的 "),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",title:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",target:"_blank",rel:"noopener noreferrer"}},[s._v("CORS"),t("OutboundLink")],1),s._v(" 。从而达到解决跨域的效果。上面的例子已经演示过，这里不再重复")]),s._v(" "),t("div",{staticClass:"language-doc line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("* resCors://*\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"mock-数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mock-数据"}},[s._v("#")]),s._v(" Mock 数据")]),s._v(" "),t("p",[s._v("通过上面提到的 "),t("code",[s._v("file://")]),s._v(" 协议，我们就可以 "),t("code",[s._v("Mock")]),s._v(" 数据，当然你如果不想使用 "),t("code",[s._v("Values")]),s._v(" 中的值，也可以使用本地的文件，类似如下的配置：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意是绝对路径")]),s._v("\n/v1/article/recommend_all_feed/i file:///Users/gpingfeng/Documents/Personal/Test/juejinList.json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"模拟-jsonp-返回"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模拟-jsonp-返回"}},[s._v("#")]),s._v(" 模拟 JSONP 返回")]),s._v(" "),t("p",[s._v("如果是 "),t("code",[s._v("JSONP")]),s._v("，我们要怎么 "),t("code",[s._v("Mock")]),s._v(" 呢？这里我们用到了 "),t("code",[s._v("tpl")]),s._v(" 协议，"),t("code",[s._v("tpl")]),s._v(" 协议基本功能跟 "),t("code",[s._v("file")]),s._v(" 协议一样可以做本地替换，但 "),t("code",[s._v("tpl")]),s._v(" 内置了一个简单的模板引擎，可以把文件内容里面 "),t("code",[s._v("{name}")]),s._v(" 替换请求参数对应的字段(如果不存在对应的自动则不会进行替换)，一般可用于 "),t("code",[s._v("mock jsonp")]),s._v(" 的请求")]),s._v(" "),t("p",[s._v("这里我们拿京东首页的一个获取轮播图的接口作为演示。我们可以看到 "),t("code",[s._v("URL")]),s._v(" 中指定的回调函数的 "),t("code",[s._v("key")]),s._v(" 为 "),t("code",[s._v("callback")]),s._v("，这个很重要，在配置 "),t("code",[s._v("Values")]),s._v(" 的时候会用到")]),s._v(" "),t("p",[t("img",{attrs:{src:e(446),alt:"xx"}})]),s._v(" "),t("p",[s._v("我们配置规则，修改返回为了路飞的图片")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 匹配到京东首页获取轮播图的接口，修改接口返回")]),s._v("\n/floor.jd.com/recommend-v20/focus_monetize/i tpl://"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("jsonp.json"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("其中 "),t("code",[s._v("jsonp.json")]),s._v(" 中的格式为")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// callback 是根据上面 JSONP 请求中发送出去的回调函数决定的")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("("),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里是返回的 JSON，这里我就是替换了返回的图片而已")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(")\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("看结果，生效了 "),t("img",{attrs:{src:e(447),alt:"xx"}})]),s._v(" "),t("h3",{attrs:{id:"绑定-host"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#绑定-host"}},[s._v("#")]),s._v(" 绑定 Host")]),s._v(" "),t("p",[s._v("一提到绑定 "),t("code",[s._v("Host")]),s._v("，我们会想起使用 "),t("code",[s._v("Switch Host")]),s._v(" 切换，但使用 "),t("code",[s._v("whistle")]),s._v(" 可以更加方便和强大，不仅支持传统的 "),t("code",[s._v("Host")]),s._v("配置，还支持子路径和端口的 "),t("code",[s._v("Host")]),s._v(" 转发配置，我们可以将我们的环境放在不同的规则中，随时切换，而且无缓存，切换时候生效更快")]),s._v(" "),t("h3",{attrs:{id:"本地代码-调试线上问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地代码-调试线上问题"}},[s._v("#")]),s._v(" 本地代码，调试线上问题")]),s._v(" "),t("p",[s._v("有时候，我们遇到线上的问题，却因为数据问题，没有办法在本地复现。一般我们项目 "),t("code",[s._v("api")]),s._v(" 的 "),t("code",[s._v("url")]),s._v(" 都会设计带上后缀，利用这个，我们可以配置如下的规则，轻松调试线上的问题")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接口走线上")]),s._v("\n^example.com/api/*** https://example.com/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 访问走本地")]),s._v("\n^example.com/*** http://127.0.0.1:8120/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"往-html-中插入-脚本-js"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#往-html-中插入-脚本-js"}},[s._v("#")]),s._v(" 往 HTML 中插入 脚本 JS")]),s._v(" "),t("p",[t("code",[s._v("jsAppend")]),s._v(" 协议往 "),t("code",[s._v("content-type")]),s._v(" 为 "),t("code",[s._v("html")]),s._v(" 或 "),t("code",[s._v("js")]),s._v(" 的响应内容后面追加数据，如果是 "),t("code",[s._v("html")]),s._v("，则会自动加上 "),t("code",[s._v("script")]),s._v(" 标签在追加到响应内容，如果是 "),t("code",[s._v("js")]),s._v("，则会自动追加到 js 文本后面")]),s._v(" "),t("p",[s._v("配置一个规则：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 往掘金页面中注入脚本")]),s._v("\n/https://juejin.im/frontend/i jsAppend://"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myJS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("查看效果：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(448),alt:"xx"}})]),s._v(" "),t("p",[s._v("查看源码，可以看到已经自动加上 "),t("code",[s._v("script")]),s._v(" 标签在追加到响应内容")]),s._v(" "),t("p",[t("img",{attrs:{src:e(449),alt:"xx"}})]),s._v(" "),t("h3",{attrs:{id:"往-html-中插入-样式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#往-html-中插入-样式"}},[s._v("#")]),s._v(" 往 HTML 中插入 样式")]),s._v(" "),t("p",[t("code",[s._v("cssAppend")]),s._v(" 往 "),t("code",[s._v("content-type")]),s._v(" 为 "),t("code",[s._v("html")]),s._v(" 或 "),t("code",[s._v("css")]),s._v(" 的响应内容后面追加数据，如果是 "),t("code",[s._v("html")]),s._v("，则会自动加上 "),t("code",[s._v("style")]),s._v(" 标签在追加到响应内容，如果是"),t("code",[s._v("css")]),s._v("，则会自动追加到文本后面")]),s._v(" "),t("p",[s._v("我们给掘金网页版加上暗黑模式吧，以下是 "),t("code",[s._v("myCSS")])]),s._v(" "),t("div",{staticClass:"language-css line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("html")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("filter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("invert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hue-rotate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("180deg"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("我们配置规则，插入到掘金中")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 往掘金中插入 CSS")]),s._v("\n/https://juejin.im/frontend/i cssAppend://"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("myCSS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("暗黑版掘金")]),s._v(" "),t("p",[t("img",{attrs:{src:e(450),alt:"xx"}})]),s._v(" "),t("p",[s._v("查看网页源码，已经有了相关的 "),t("code",[s._v("CSS")]),s._v(" 样式")]),s._v(" "),t("p",[t("img",{attrs:{src:e(451),alt:"xx"}})]),s._v(" "),t("h3",{attrs:{id:"修改-cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改-cookie"}},[s._v("#")]),s._v(" 修改 cookie")]),s._v(" "),t("p",[s._v("开发中，我们很多时候，需要设置请求头或者响应头的 "),t("code",[s._v("cookie")]),s._v("，这个时候，我们就需要用到 "),t("code",[s._v("reqCookies")]),s._v(" 和 "),t("code",[s._v("resCookies")]),s._v("。它们的功能分别是修改请求头的 "),t("code",[s._v("Cookie")]),s._v(" 和 修改响应头的 "),t("code",[s._v("Set-Cookie")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改请求头的 `Cookie`")]),s._v("\n/apinew.juejin.im/interact_api/i reqCookies://"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("reqcookie"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改响应头的 `Set-Cookie`")]),s._v("\n/apinew.juejin.im/interact_api/i resCookies://"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("resCookies.json"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("code",[s._v("reqcookie")]),s._v(" 内容如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Gopal'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("like")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'FE'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("效果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(452),alt:"xx"}})]),s._v(" "),t("p",[t("code",[s._v("resCookies.json")]),s._v(" 的内容如下")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Feng"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"age"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"26"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"happy"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"value"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"FE"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"maxAge"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"httpOnly"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"secure"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("效果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(453),alt:"xx"}})]),s._v(" "),t("h2",{attrs:{id:"真正的杀手锏-移动端调试"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#真正的杀手锏-移动端调试"}},[s._v("#")]),s._v(" 真正的杀手锏——移动端调试")]),s._v(" "),t("p",[s._v("相比于在 "),t("code",[s._v("PC")]),s._v(" 端，在移动端调试网页，主要会遇到以下两个问题：")]),s._v(" "),t("ul",[t("li",[s._v("没有 "),t("code",[s._v("Console")]),s._v("，无法查看页面的 "),t("code",[s._v("js")]),s._v(" 错误及通过 "),t("code",[s._v("console.xxx")]),s._v(" 输出的调试日志")]),s._v(" "),t("li",[s._v("无法查看、修改页面的 "),t("code",[s._v("DOM")]),s._v(" 结构及样式")])]),s._v(" "),t("p",[s._v("虽然很多移动端页面，我们可以在 "),t("code",[s._v("Chrome")]),s._v(" 的模拟器中进行调试，但不是所有的移动端页面都可以在 "),t("code",[s._v("PC")]),s._v(" 端调试和复现问题。往往在 "),t("code",[s._v("APP")]),s._v(" 中嵌入的页面，在不同的机器中会遇到兼容性问题，需要在真机中才能看到效果或者复现问题，这个时候就需要我们的 "),t("code",[s._v("whistle")]),s._v(" 登场了")]),s._v(" "),t("h3",{attrs:{id:"移动端捕获页面错误和-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移动端捕获页面错误和-log"}},[s._v("#")]),s._v(" 移动端捕获页面错误和 log")]),s._v(" "),t("p",[s._v("移动端，我们查看报错信息也是比较麻烦的，为此，"),t("code",[s._v("whistle")]),s._v(" 提供了 "),t("code",[s._v("log")]),s._v(" 功能如下：")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("https://juejin.im/frontend log://{test.js}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("code",[s._v("test.js")]),s._v(" 主要是模拟脚本报错，内容如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("warn")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("test")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 模拟抛出异常")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("notAFunction")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("在 "),t("code",[s._v("Network")]),s._v(" —— "),t("code",[s._v("Tools")]),s._v(" 下面就可以看到报错等日志了")]),s._v(" "),t("p",[t("img",{attrs:{src:e(454),alt:"xx"}})]),s._v(" "),t("p",[s._v("具体的操作演示动画如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(455),alt:"xx"}})]),s._v(" "),t("h3",{attrs:{id:"查看移动端页面的-dom-样式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看移动端页面的-dom-样式"}},[s._v("#")]),s._v(" 查看移动端页面的 DOM 样式")]),s._v(" "),t("p",[s._v("移动端的 "),t("code",[s._v("DOM")]),s._v(" 样式查看和调试对于我们来讲也是一个比较头疼的事情。"),t("code",[s._v("whistle")]),s._v(" 就能够做到轻松查看调试移动端的 "),t("code",[s._v("DOM")]),s._v(" 样式，就跟调试桌面端的浏览器一样，这个是通过 "),t("code",[s._v("whistle")]),s._v(" 内置的 "),t("code",[s._v("weinre")]),s._v(" 去实现的")]),s._v(" "),t("p",[s._v("配置规则如下，其中 "),t("code",[s._v("test")]),s._v(" 只是作为一个标识：")]),s._v(" "),t("div",{staticClass:"language-dos line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("https://juejin.im/frontend weinre://test\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("演示动图以及效果如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(456),alt:"xx"}})]),s._v(" "),t("h3",{attrs:{id:"使用插件-利用-whistle-注入-vconsole"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用插件-利用-whistle-注入-vconsole"}},[s._v("#")]),s._v(" 使用插件——利用 whistle 注入 vConsole")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/WechatFE/vConsole",title:"https://github.com/WechatFE/vConsole",target:"_blank",rel:"noopener noreferrer"}},[s._v("vConsole"),t("OutboundLink")],1),s._v(" 是微信团队开发的轻量、可拓展、针对手机网页的前端开发者调试面板，主要原理是通过在页面注入 "),t("code",[s._v("js")]),s._v(" 实现模拟 "),t("code",[s._v("PC")]),s._v(" 浏览器的 "),t("code",[s._v("Console")]),s._v(" 功能")]),s._v(" "),t("p",[s._v("因为官方没有提供，所以我们这里选择使用插件的方法，顺便介绍下插件的用法（每个插件的用法不同，大家举一反三）")]),s._v(" "),t("p",[s._v("首先，安装插件")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装插件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" whistle.inspect\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("安装成功后，可以在 "),t("code",[s._v("Plugins")]),s._v(" 页面中看到我们安装的插件：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(457),alt:"xx"}})]),s._v(" "),t("p",[s._v("安装插件后，只需配置简单的规则即可随意切换 "),t("code",[s._v("vConsole")]),s._v(" 和 "),t("code",[s._v("eruda")]),s._v("，这里我们只演示 "),t("code",[s._v("vConsole")])]),s._v(" "),t("p",[s._v("配置规则：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("juejin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("im"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("i whistle"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inspect"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("vConsole\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:e(458),alt:"xx"}})]),s._v(" "),t("p",[s._v("演示动图如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(459),alt:"xx"}})]),s._v(" "),t("h2",{attrs:{id:"插件开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件开发"}},[s._v("#")]),s._v(" 插件开发")]),s._v(" "),t("p",[s._v("上面提到了插件的使用，为了满足一些特定业务场景的需要，"),t("code",[s._v("whistle")]),s._v(" 也提供了插件扩展能力，通过插件可以新增 "),t("code",[s._v("whistle")]),s._v(" 的协议实现更复杂的操作、也可以用来存储或监控指定请求、集成业务本地开发调试环境等等，基本上可以做任何你想做的事情，且开发、发布及安装 "),t("code",[s._v("whistle")]),s._v(" 插件也都很简单。")]),s._v(" "),t("p",[t("code",[s._v("whistle")]),s._v(" 的插件是一个独立运行的进程，这样是为了确保插件不会影响到 "),t("code",[s._v("whistle")]),s._v(" 主进程的稳定性，并通过暴露一些 "),t("code",[s._v("http server")]),s._v(" 的方式实现与 "),t("code",[s._v("whistle")]),s._v(" 的交互，"),t("code",[s._v("whistle")]),s._v(" 会在特定阶段请求特定的 "),t("code",[s._v("server")]),s._v("，具体看下面的原理图：")]),s._v(" "),t("p",[t("img",{attrs:{src:e(460),alt:"xx"}})]),s._v(" "),t("p",[s._v("从上面几个图可以知，"),t("code",[s._v("whistle")]),s._v(" 插件会设计以下 7 种 "),t("code",[s._v("server")]),s._v("，也就是有 7 种强大的功能")]),s._v(" "),t("ul",[t("li",[s._v("statsServer：统计请求信息的服务")]),s._v(" "),t("li",[s._v("resStatsServer：统计响应信息的服务")]),s._v(" "),t("li",[s._v("rulesServer：设置请求规则的服务(支持 "),t("code",[s._v("http/https/websocket")]),s._v(" 请求)")]),s._v(" "),t("li",[s._v("resRulesServer：设置响应规则的服务(支持 "),t("code",[s._v("http/https/websocket")]),s._v(" 请求)")]),s._v(" "),t("li",[s._v("tunnelRulesServer：设置 "),t("code",[s._v("tunnel")]),s._v(" 请求规则的服务")]),s._v(" "),t("li",[s._v("server："),t("code",[s._v("whistle")]),s._v(" 会把指定请求转发到该 "),t("code",[s._v("server")])]),s._v(" "),t("li",[s._v("uiServer: "),t("code",[s._v("whistle")]),s._v(" 插件的界面，可以通过特定的 "),t("code",[s._v("url")]),s._v(" 访问")])]),s._v(" "),t("h2",{attrs:{id:"结束语"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结束语"}},[s._v("#")]),s._v(" 结束语")]),s._v(" "),t("p",[t("code",[s._v("whistle")]),s._v(" 作为一个强大的工具，我给大家介绍的只是其中一部分知识，但我坚信其中能够解决大家 80% 的问题了，希望能够对大家平时工作带来帮助。更多的使用技巧，大家可以查看 "),t("a",{attrs:{href:"http://wproxy.org/whistle/",title:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"参考文章"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://wproxy.org/whistle/",title:"http://wproxy.org/whistle/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://imweb.io/topic/5981a34bf8b6c96352a59401",title:"https://imweb.io/topic/5981a34bf8b6c96352a59401",target:"_blank",rel:"noopener noreferrer"}},[s._v("利用 whistle 调试移动端页面"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.cn/post/6844903684736827400",title:"https://juejin.cn/post/6844903684736827400",target:"_blank",rel:"noopener noreferrer"}},[s._v("whistle--前端调试利器"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);